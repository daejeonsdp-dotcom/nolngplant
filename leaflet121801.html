import React, { useState } from 'react';
import { ChevronLeft, ChevronRight, Share2, Download, Smartphone, Layout, CreditCard, Phone } from 'lucide-react';

const App = () => {
  const [viewMode, setViewMode] = useState('web'); // 'web', 'capture', 'card'
  const [cardIndex, setCardIndex] = useState(0);

  const campaignData = {
    title: "송전탑 건설 전면 재검토",
    subTitle: "지역을 에너지 식민지로 전락시키는",
    mainMessage: "폭탄돌리기식 입지선정위원회 추진 중단하라!",
    sections: [
      {
        id: 1,
        title: "누구를 위한 희생입니까?",
        content: "정부의 졸속적인 3,855km 송변전선로 건설 계획. 이는 수도권 대기업을 위해 대전 시민의 삶을 희생시키는 '에너지 식민지' 사업입니다.",
        emphasis: "삼성과 SK 등 대기업의 이윤을 위해 우리가 전자파를 감내해야 합니까?"
      },
      {
        id: 2,
        title: "기만적인 입지선정위",
        content: "주민 갈등을 유발하는 다수결식 입지 선정. 대전의 운명이 밀실에서 결정되고 있습니다. 시민들은 위원이 누구인지도 모릅니다.",
        emphasis: "갈등을 조장하는 비민주적 절차를 즉각 중단하십시오."
      },
      {
        id: 3,
        title: "우리의 정당한 요구",
        list: [
          "용인 반도체 산단 계획 전면 재검토",
          "신계룡-북천안 송전선로 백지화",
          "수도권 전력 수요 관리 우선 실현",
          "대전시와 구청의 명확한 반대 표명"
        ]
      }
    ],
    footer: {
      org: "대전송전탑건설백지화대책위",
      phone: "042-331-3700"
    }
  };

  // 1. 모바일 웹포스터 뷰 (수직 긴 레이아웃)
  const WebPosterView = () => (
    <div className="w-full max-w-md mx-auto bg-white shadow-2xl overflow-hidden animate-fade-in">
      {/* 헤더 */}
      <div className="bg-red-700 text-white p-8 text-center">
        <p className="text-lg font-medium opacity-90 mb-2">{campaignData.subTitle}</p>
        <h1 className="text-3xl font-black leading-tight mb-6 break-keep">{campaignData.title}</h1>
        <div className="bg-white text-red-700 py-3 px-4 font-black text-xl shadow-inner transform -rotate-1">
          {campaignData.mainMessage}
        </div>
      </div>
      
      {/* 본문 */}
      <div className="p-6 space-y-12 py-12">
        {campaignData.sections.map((s) => (
          <div key={s.id} className="space-y-4">
            <h2 className="text-2xl font-black text-red-700 border-b-4 border-red-700 pb-2 inline-block">
              {s.title}
            </h2>
            <p className="text-lg leading-relaxed text-gray-800 break-keep">
              {s.content}
            </p>
            {s.emphasis && (
              <div className="bg-red-50 p-4 border-l-4 border-red-700 font-bold italic text-gray-900">
                "{s.emphasis}"
              </div>
            )}
            {s.list && (
              <ul className="space-y-3">
                {s.list.map((item, idx) => (
                  <li key={idx} className="flex items-start gap-3 bg-gray-50 p-3 rounded-lg font-bold">
                    <span className="text-red-700">●</span> {item}
                  </li>
                ))}
              </ul>
            )}
          </div>
        ))}
      </div>

      {/* 푸터 */}
      <div className="bg-gray-900 text-white p-8 text-center">
        <p className="text-xl font-bold mb-4">{campaignData.footer.org}</p>
        <div className="inline-flex items-center gap-2 bg-red-700 px-6 py-2 rounded-full font-bold">
          <Phone size={18} /> {campaignData.footer.phone}
        </div>
      </div>
    </div>
  );

  // 2. 캡처 모드 (1080x1350 비율 - 4:5 세로형)
  const CaptureView = () => (
    <div className="flex justify-center p-4">
      <div 
        id="poster-capture"
        style={{ width: '400px', height: '500px' }} // UI상 축소 표시 (실제 비율 4:5)
        className="bg-white border-[12px] border-red-700 p-8 flex flex-col relative overflow-hidden shadow-2xl"
      >
        <div className="mb-4">
          <span className="bg-red-700 text-white px-3 py-1 text-sm font-black">긴급 행동</span>
        </div>
        <h1 className="text-3xl font-black leading-tight mb-2 break-keep">
          {campaignData.subTitle} <br/>
          <span className="text-red-700">{campaignData.title}</span>
        </h1>
        <div className="h-1 w-20 bg-black mb-6"></div>
        
        <div className="flex-grow space-y-4">
          <p className="text-lg font-bold leading-snug break-keep text-gray-800">
            주민 갈등을 유발하고 대전을 '에너지 식민지'로 만드는 송전탑 건설 계획을 즉각 중단하십시오.
          </p>
          <div className="bg-gray-100 p-4 font-black border-l-8 border-red-700 italic">
            "우리의 터전을 죽이지 마십시오"
          </div>
        </div>

        <div className="mt-auto pt-4 border-t-2 border-dashed border-gray-400 flex justify-between items-end">
          <p className="font-black text-lg">{campaignData.footer.org}</p>
          <p className="text-[10px] text-gray-400 font-bold tracking-tighter">주변에 소식을 알려주세요</p>
        </div>
      </div>
    </div>
  );

  // 3. 카드뉴스 모드 (1080x1080 비율 - 1:1 정방형 슬라이드)
  const CardNewsView = () => {
    const cards = [
      // 표지
      <div className="h-full w-full bg-red-700 text-white p-10 flex flex-col justify-center items-center text-center">
        <p className="text-xl mb-4 opacity-90">{campaignData.subTitle}</p>
        <h1 className="text-4xl font-black leading-tight mb-8 break-keep">{campaignData.title}</h1>
        <div className="w-16 h-1 bg-white mb-8"></div>
        <p className="bg-white text-red-700 px-6 py-3 text-2xl font-black rounded-lg shadow-xl">{campaignData.mainMessage}</p>
      </div>,
      // 내용 카드들
      ...campaignData.sections.map(s => (
        <div className="h-full w-full bg-white p-10 flex flex-col justify-center border-[16px] border-red-700">
          <h2 className="text-3xl font-black text-red-700 mb-6">{s.title}</h2>
          <p className="text-xl leading-relaxed text-gray-800 mb-6 break-keep">{s.content}</p>
          {s.emphasis && <div className="p-4 bg-red-50 border-l-4 border-red-700 font-bold italic text-lg">"{s.emphasis}"</div>}
          {s.list && (
            <ul className="space-y-2">
              {s.list.map((item, idx) => (
                <li key={idx} className="flex gap-3 font-bold text-lg"><span className="text-red-700">▶</span> {item}</li>
              ))}
            </ul>
          )}
        </div>
      )),
      // 마지막 카드
      <div className="h-full w-full bg-gray-900 text-white p-10 flex flex-col justify-center items-center text-center">
        <h2 className="text-4xl font-black mb-8">우리의 목소리가 <br/>세상을 바꿉니다!</h2>
        <div className="space-y-2 mb-10">
          <p className="text-2xl font-bold">{campaignData.footer.org}</p>
          <p className="text-xl opacity-60">문의: {campaignData.footer.phone}</p>
        </div>
        <div className="text-red-500 animate-bounce"><Share2 size={48} /></div>
      </div>
    ];

    return (
      <div className="flex flex-col items-center">
        <div className="relative w-full aspect-square max-w-md bg-gray-200 shadow-2xl rounded-sm overflow-hidden group">
          {cards[cardIndex]}
          
          {/* 네비게이션 버튼 */}
          <button 
            onClick={() => setCardIndex(prev => Math.max(0, prev - 1))}
            className="absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/60 text-white p-2 rounded-full transition-colors"
          >
            <ChevronLeft size={32} />
          </button>
          <button 
            onClick={() => setCardIndex(prev => Math.min(cards.length - 1, prev + 1))}
            className="absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/60 text-white p-2 rounded-full transition-colors"
          >
            <ChevronRight size={32} />
          </button>
          
          {/* 페이지 표시 */}
          <div className="absolute bottom-6 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-1 rounded-full text-sm font-bold">
            {cardIndex + 1} / {cards.length}
          </div>
        </div>
        <p className="mt-4 text-sm text-gray-500 font-medium">슬라이드를 넘겨 한 장씩 캡처하세요 (1:1 정방형)</p>
      </div>
    );
  };

  return (
    <div className="min-h-screen bg-gray-100 text-gray-900 pb-20">
      <style>
        {`
          @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .animate-fade-in {
            animation: fade-in 0.6s ease-out forwards;
          }
          .break-keep { word-break: keep-all; }
        `}
      </style>

      {/* 상단 탭 네비게이션 */}
      <nav className="sticky top-0 z-50 bg-white shadow-md border-b border-gray-200">
        <div className="max-w-4xl mx-auto px-4 flex justify-between items-center h-16">
          <div className="font-black text-xl text-red-700 tracking-tighter flex items-center gap-2">
            <div className="w-6 h-6 bg-red-700 rounded-sm"></div> 캠페인 툴킷
          </div>
          <div className="flex bg-gray-100 p-1 rounded-xl">
            <button 
              onClick={() => setViewMode('web')}
              className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${viewMode === 'web' ? 'bg-white shadow-sm text-red-700' : 'text-gray-500'}`}
            >
              <Smartphone size={16} /> 웹포스터
            </button>
            <button 
              onClick={() => setViewMode('card')}
              className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${viewMode === 'card' ? 'bg-white shadow-sm text-red-700' : 'text-gray-500'}`}
            >
              <CreditCard size={16} /> 카드뉴스
            </button>
            <button 
              onClick={() => setViewMode('capture')}
              className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${viewMode === 'capture' ? 'bg-white shadow-sm text-red-700' : 'text-gray-500'}`}
            >
              <Layout size={16} /> 캡처모드
            </button>
          </div>
        </div>
      </nav>

      {/* 메인 콘텐츠 구역 */}
      <main className="max-w-4xl mx-auto py-10 px-4">
        <div className="mb-10 text-center">
          <h2 className="text-3xl font-black mb-2">대전 송전탑 건설 반대</h2>
          <p className="text-gray-600 font-medium">원하는 모드를 선택하여 홍보 자료를 생성하고 공유하세요.</p>
        </div>

        {viewMode === 'web' && <WebPosterView />}
        {viewMode === 'card' && <CardNewsView />}
        {viewMode === 'capture' && (
          <div className="flex flex-col items-center gap-8">
            <CaptureView />
            <div className="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm max-w-md text-center">
              <h3 className="font-bold text-lg mb-2">이미지 활용 방법</h3>
              <p className="text-gray-600 text-sm leading-relaxed mb-4">
                위 이미지는 4:5 비율(1080x1350)에 최적화되어 있습니다. <br/>
                화면을 캡처하여 카카오톡 공지나 SNS 게시물로 활용해 주세요.
              </p>
              <button className="bg-black text-white px-6 py-2 rounded-full font-bold flex items-center gap-2 mx-auto hover:scale-105 transition-transform">
                <Download size={18} /> 이미지 저장하기 (캡처 권장)
              </button>
            </div>
          </div>
        )}
      </main>

      {/* 하단 정보 바 */}
      <footer className="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-gray-200 py-3 px-4 text-center">
        <p className="text-xs text-gray-500 font-bold">© 2025 {campaignData.footer.org}</p>
      </footer>
    </div>
  );
};

export default App;
